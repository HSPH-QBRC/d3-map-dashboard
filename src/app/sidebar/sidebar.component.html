<!-- <app-loading-spinner *ngIf="isLoading"></app-loading-spinner> -->
<div class="p-3" style="width: 280px; background-color: #f9f9f9; border-radius: 8px;">
    <a mat-button routerLink="/" class="title-container">
        <span class="mat-h5 font-weight-semibold dashboard-title">DASHBOARD</span>
    </a>

    <mat-accordion class="no-shadow" multi>
        <mat-slide-toggle class="example-margin" [checked]="useBivariate" (change)="onChangeBivariate()"
            color="primary">Use
            Bivariate Choropleth</mat-slide-toggle>
        <mat-slide-toggle class="example-margin" [checked]="!useBivariate" (change)="onChangeBivariate()"
            color="primary">Use
            Heatmap Overlays</mat-slide-toggle>
        <mat-slide-toggle class="example-margin" [checked]="showRedline" (change)="onChangeRedline()"
            color="warn">Show Redlining Districts</mat-slide-toggle>
        <br>
        <br>
        <!-- <button mat-button class="btn-toggle align-items-center rounded" [attr.aria-expanded]="true">
            Year
        </button>
        <br>
        <div *ngIf="showYears">
            <div class="slider">
                {{minYear}}
                <mat-slider thumbLabel [tickInterval]="2" [step]="1" [min]="minYear" [max]="maxYear" aria-label="units"
                    [(ngModel)]="selectedYear">
                </mat-slider>
                {{maxYear}}
            </div>
        </div> -->

        <button mat-button class="btn-toggle align-items-center rounded" [attr.aria-expanded]="true">
            Columns
        </button>
        <br>
        <div *ngIf="showCols">
            <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small" style="padding-left: 16px; margin: 0;">
                <li *ngFor="let col of (showMoreCols ? columns : columns.slice(0, 5)); let i = index"
                    style="list-style: none; margin: 4px 0;">
                    <mat-checkbox *ngIf="col.name !== '--'" [(ngModel)]="col.checked" style="display: block;"
                        [color]="i === 0 ? 'warn': (i === 1? 'primary':'accent')"
                        (change)="onCheckboxChange(i, col.checked, col.name)">
                        {{ col.name }}
                    </mat-checkbox>
                </li>
            </ul>
            <p style="text-align: right;"><button class="showmore-button" (click)="showMore('cols')">{{showMoreCols ?
                    'Show less...':'Show more...'}} </button></p>
        </div>

        <button mat-button class="btn-toggle align-items-center rounded" [attr.aria-expanded]="true">
            Map
        </button>
        <br>
        <div *ngIf="showMaps">
            <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small" style="padding-left: 16px; margin: 0;">
                <li *ngFor="let col of (showMoreMaps ? mapsCols : mapsCols.slice(0, 5))"
                    style="list-style: none; margin: 4px 0;">
                    <mat-radio-group [(ngModel)]="selectedMap">
                        <mat-radio-button [value]="col.name" style="display: block;">
                            {{ col.name }}
                        </mat-radio-button>
                    </mat-radio-group>
                </li>
            </ul>
            <p style="text-align: right;"><button class="showmore-button" (click)="showMore('maps')">{{showMoreMaps ?
                    'Show less...':'Show more...'}} </button></p>
        </div>
    </mat-accordion>

    <div class="button-container">
        <button mat-raised-button color="primary" (click)="sendData()" class="update-button">
            Update
        </button>
    </div>
</div>